{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nexport async function fetchImages(searchData, page, perPage) {\n    try {\n        const searchParams = new URLSearchParams({\n            key: '44728966-7765244b057c0982fa05c31d9',\n            q: searchData,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: \"true\",\n            per_page: perPage,\n            page: page\n        });\n        const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error; \n    }\n}\n\n\n            \n    ","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nexport function displayImages(images, gallery) {\n    const markup = images.map(image => `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <div class=\"full-image\">\n                    <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n                    <ul class=\"image-button\">\n                        <li><p>Likes</p><p>${image.likes}</p></li>\n                        <li><p>Views</p><p>${image.views}</p></li>\n                        <li><p>Comments</p><p>${image.comments}</p></li>\n                        <li><p>Downloads</p><p>${image.downloads}</p></li>\n                    </ul>\n                </div>\n            </a>\n        </li>\n    `).join('');\n    gallery.insertAdjacentHTML('beforeend', markup); \n\n    const lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n     lightbox.refresh();\n}\n\nexport function displayToast(message, type) {\n    iziToast[type]({\n        message,\n        messageColor: 'white',\n        position: 'topRight',\n        backgroundColor: 'red'\n\n    });\n}","import { fetchImages } from \"./js/pixabay-api.js\";\nimport { displayImages, displayToast } from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const searchForm = document.querySelector(\"form\");\n    const gallery = document.querySelector(\".gallery\");\n    const loader = document.querySelector(\".spinner\");\n    const loadButton = document.querySelector(\".load-button\");\n    let page = 1;\n    const perPage = 15;\n    let searchData = '';\n\n    if (!searchForm || !gallery || !loader || !loadButton) {\n        console.error('Required elements are not found in the DOM.');\n        return;\n    }\n\n    loadButton.classList.add('is-hidden');\n    \n    searchForm.addEventListener(\"submit\", event => {\n        event.preventDefault();\n        gallery.innerHTML = \"\";\n        page = 1;\n        loader.classList.remove('is-hidden');\n        searchData = event.target.elements.search_input.value.trim();\n        if (searchData === \"\") {\n            loadButton.classList.add('is-hidden');\n            displayToast('All form fields must be filled in', 'warning');\n            loader.classList.add('is-hidden');\n            return;\n        }\n        fetchImages(searchData, page, perPage)\n            .then(images => {\n                if (images.total === 0) {\n                    displayToast('Sorry, there are no images matching your search query. Please try again!', 'error');\n                    loadButton.classList.add('is-hidden');\n                    return;\n                } else if (images.total <= 15) {\n                    displayImages(images.hits, gallery);\n                    iziToast.error({\n                        position: \"topRight\",\n                        message: \"We're sorry, there are no more posts to load\",\n                        messageColor: 'white',\n                        backgroundColor: 'red'\n                    });\n                } else {\n                    loadButton.classList.remove('is-hidden');\n                    displayImages(images.hits, gallery);\n                }\n            })\n            .catch(error => {\n                console.error('Error fetching images:', error);\n                displayToast('An error occurred while fetching images. Please try again later.', 'error');\n            })\n            .finally(() => {\n                event.target.reset();\n                loader.classList.add('is-hidden');\n            });\n    });\n\n    loadButton.addEventListener(\"click\", async () => {\n        try {\n            loader.classList.remove('is-hidden');\n            page += 1;\n            const images = await fetchImages(searchData, page, perPage);\n            displayImages(images.hits, gallery);\n            const fullImage = document.querySelector(\".full-image\");\n            let rect = fullImage.getBoundingClientRect();\n            const totalPages = Math.ceil(images.totalHits / perPage);\n            if (page >= totalPages) {\n                loadButton.classList.add('is-hidden');\n                iziToast.error({\n                    position: \"topRight\",\n                    message: \"We're sorry, there are no more posts to load\",\n                    messageColor: 'white',\n                    backgroundColor: 'red'\n                });\n            } else {\n                window.scrollBy({\n                    top: rect.height * 2,\n                    behavior: \"smooth\",\n                });\n            }\n        } catch (error) {\n            console.log(error);\n        } finally {\n            loader.classList.add('is-hidden');\n        }\n    });\n});\n"],"names":["fetchImages","searchData","page","perPage","searchParams","axios","error","displayImages","images","gallery","markup","image","SimpleLightbox","displayToast","message","type","iziToast","searchForm","loader","loadButton","event","rect","totalPages"],"mappings":"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"}